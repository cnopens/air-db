# 查询

数据库查询操作

## 属性

### 查询类型 - detail，query，select

##### 说明

​	查询的类型

##### 关键字

##### 	detail：查询单条记录

##### 	query：查询多条记录

##### 	select：查询多条记录，同query

##### 格式

```
{
    "查询关键字"："数据源.表名 表别名"
}
```

##### 示例

```
// 1.只有表名
{
    "select":"user"
}
// 2.表名 + 别名
{
    "select":"user u"
}
// 3.数据源.表名
{
    "select":"oa.user"
}
// 4.数据源.表名 + 表别名
{
    "select":"oa.user u"
}
```

### 查询字段 - fields

##### 说明

​	查询的字段，格式为多个列的数组。如果该属性不指定，则默认查询所有字段

​	支持所有数据库函数，

##### 关键字

​	fields

##### 格式

```
{
    "fields":["name", "age"]
}
```

### 查询条件 - where

##### 说明

​	sql中的where查询的条件

##### 关键字

​	where

##### 格式

```

```

​	condition格式为{连接符：条件}，连接符包括and和or

​	条件可以有多种格式

​		字符串：单个条件，字段+运算符+值。如 "a=1"

​		数组：多个条件，需要括号包裹

​	当连接符为and时，condition的连接符可以省略。即{连接符：条件} -> 条件

​	如果想指定值为字符类型，需要用单引号包裹，如"a='1'"

##### 支持的运算符

​	等于：=

​	不等于：!=

​	大于：>

​	大于等于：>=

​	小于：<

​	小于等于：<=

​	in：, 逗号拼接多个值

​	between：~ 两边都包含边界，如果想要更精确的范围，请使用大于小于运算符

​	like：%=

##### 支持的连接符

​	and：{"and":"a=1"}  可简写成 ”a=1“

​	or：{"or":"a=1"}

​	{"and":"a=1"}或{"or":"a=1"}是条件的最小单位。对象中的value不可以再是多个条件。如果需要多个条件，可以写多个对象

​	sql中表达多个条件组合成的条件时通常用（）包裹，这里用[]表示sql中的（），将多个条件放在同一数组中

##### 示例

```
"where":[
  "sex=male",
  "character=optimism",
  {"or":"height=1.8"},
  ["job!=student", {"or":"hobby=football"}, {"or":"hobby=pingpang"}],
  {"or":"age=25~40"}
]
```

### 多表关联 - join

##### 说明

​	多表关联Join操作，需要在配置文件中预先配置表的关联关系。

​	数据库表支持别名，数据库表名 + 空格 + 数据库表别名

##### 关键字

​	join

##### 格式

​	数组

```
{
    "join":[
        {
            连接类型:连接表名
        },
        {
            连接类型:连接表名
        }
        ...
    ]
}
```

​	如果只有一个关联表的情况下，可以使用对象形式

```
{
    "join":{
    	连接类型:连接表名
    }
}
```

​	如果关联关系是left，则left可以省略，简写为字符串形式

```
{
    "join":"连接表名"
}
```

#### 示例

```
{
    "join":[
        {
            "left":"user_info"
        },
        {
            "right":"student_info"
        },
        "code_sex"
    ]
}
```

### 